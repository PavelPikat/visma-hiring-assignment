parameters:
  manifest: ''
  
steps:
  - checkout: self
  - pwsh: Test-Path "${{ parameters.manifest }}"
  - task: Kubernetes@1
    displayName: kubectl apply
    inputs:
      connectionType: Azure Resource Manager
      azureSubscriptionEndpoint: 'e-conomic assignment'
      azureResourceGroup: 'sre-assignment-rg'
      kubernetesCluster: 'sre-assignment-aks-1'
      useClusterAdmin: true
      command: 'apply'
      useConfigurationFile: true
      arguments: '-f ${{ parameters.manifest }}'
